*&---------------------------------------------------------------------*
*& Report  ZSDR0025
*&
*&---------------------------------------------------------------------*
*&
*&
*&---------------------------------------------------------------------*

REPORT  ZSDR0025.


START-OF-SELECTION.

  DATA:PROG(8),
    MSG(120),
    LIN(3),
    WRD(10),
    OFF(3).

  DATA:
    CODE(350) OCCURS 0,
    TL_ESQ_CALC TYPE TABLE OF ZSDS006 WITH HEADER LINE,
    P_RESULT TYPE BSID-DMBTR,
    WL_DYN_D TYPE REF  TO CL_ABAP_ELEMDESCR,
    WL_DATA TYPE REF TO DATA,
    C_DECIMAIS TYPE ZSDT0070-C_DECIMAIS,
    C_DECIMAIS_AUX TYPE I,
    I_FIXACAO TYPE POSNR.

*FIELD-SYMBOLS: <FS_TABLE2> TYPE STANDARD TABLE.
*
**  IMPORT <FS_TABLE2>  FROM MEMORY ID 'TG_ITENS_FS'.
  IMPORT C_DECIMAIS TO C_DECIMAIS FROM MEMORY ID 'C_DECIMAIS'.
  C_DECIMAIS_AUX = C_DECIMAIS.
  WL_DYN_D = CL_ABAP_ELEMDESCR=>GET_P( P_LENGTH = 13
                                       P_DECIMALS = C_DECIMAIS_AUX ).
  CREATE DATA WL_DATA TYPE HANDLE WL_DYN_D.
  FIELD-SYMBOLS: <FS_RESULT> TYPE ANY.
  ASSIGN WL_DATA->* TO <FS_RESULT>.

  IMPORT CODE TO CODE FROM MEMORY ID 'CODE'.
  IMPORT I_FIXACAO TO I_FIXACAO FROM MEMORY ID 'I_FIXACAO'.

  IMPORT TLG_ESQ_CALC TO TL_ESQ_CALC FROM MEMORY ID 'ESQ_CALC'.

  GENERATE SUBROUTINE POOL CODE
                          NAME PROG
                       MESSAGE MSG
                          LINE LIN
                          WORD WRD
                        OFFSET OFF.

  IF SY-SUBRC IS INITIAL.
    TRY.
        PERFORM DYN1 IN PROGRAM (PROG) CHANGING <FS_RESULT>. "P_RESULT.
*      CATCH CX_SY_CONVERSION_NO_NUMBER.
    ENDTRY.
    EXPORT  <FS_RESULT>  TO MEMORY ID 'RESULT'.
  ENDIF.
