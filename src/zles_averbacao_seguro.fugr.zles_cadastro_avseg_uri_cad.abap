FUNCTION ZLES_CADASTRO_AVSEG_URI_CAD.
*"----------------------------------------------------------------------
*"*"Interface local:
*"  IMPORTING
*"     REFERENCE(I_CONSULTA) TYPE  CHAR01
*"     REFERENCE(I_CD_SEGURADORA) TYPE  LIFNR OPTIONAL
*"  EXPORTING
*"     REFERENCE(I_GRAVOU) TYPE  CHAR01
*"  CHANGING
*"     REFERENCE(I_OB_URI) TYPE REF TO  ZCL_AVERBACAO_SEGURO_URI
*"       OPTIONAL
*"----------------------------------------------------------------------

  IF I_OB_URI IS NOT INITIAL.
    OBJ_URI = I_OB_URI.
  ELSE.
    CREATE OBJECT OBJ_URI.
    IF I_CD_SEGURADORA IS NOT INITIAL.
      OBJ_URI->SET_REGISTRO( I_ID_REGISTRO = I_CD_SEGURADORA ).
    ENDIF.
  ENDIF.

  CK_CONSULTA         = I_CONSULTA.
  CK_GRAVADO          = ABAP_FALSE.

  PERFORM CADASTRO_URI.

  IF CK_GRAVADO EQ ABAP_TRUE OR I_CONSULTA IS NOT INITIAL.
    I_OB_URI = OBJ_URI.
    I_GRAVOU = ABAP_TRUE.
  ENDIF.

  CLEAR: OBJ_URI.

  "PERFORM LIMPAR_VARIAVEIS.

  I_GRAVOU = CK_GRAVADO.

ENDFUNCTION.
