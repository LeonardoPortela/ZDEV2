FUNCTION ZMF_LANC_ORDEM_CARREGAME.
*"----------------------------------------------------------------------
*"*"Interface local:
*"  IMPORTING
*"     REFERENCE(I_NR_SAFRA) TYPE  ZDE_NR_SAFRA
*"     REFERENCE(I_ID_BUKRS) TYPE  BUKRS
*"     REFERENCE(I_ID_BRANCH) TYPE  ZDE_BRANCH_RECEB
*"     REFERENCE(I_TIPO_FRETE) TYPE  ZDE_TP_FRETE
*"     REFERENCE(I_ID_ORDEM) TYPE  ZDE_ID_ORDEM OPTIONAL
*"     REFERENCE(I_FUNDO) TYPE  CHAR01 DEFAULT 'X'
*"     REFERENCE(I_ID_AGENT_FRETE) TYPE  ZDE_ID_AGENT_FRETE OPTIONAL
*"  EXPORTING
*"     REFERENCE(E_ID_ORDEM) TYPE  ZDE_ID_ORDEM
*"     REFERENCE(E_ORDEM_ALV) TYPE  ZDE_ZSDT0001OD_ALV
*"     REFERENCE(E_ID_AGENT_FRETE) TYPE  ZDE_ID_AGENT_FRETE
*"----------------------------------------------------------------------

  ZDE_ZSDT0001OD_ALV-NR_SAFRA  = I_NR_SAFRA.
  ZDE_ZSDT0001OD_ALV-ID_BUKRS  = I_ID_BUKRS.
  ZDE_ZSDT0001OD_ALV-ID_BRANCH = I_ID_BRANCH.

  IF I_ID_ORDEM IS NOT INITIAL.
    ZDE_ZSDT0001OD_ALV = ZCL_ORDEM_CARREGAMENTO=>BUSCA_ORDEM_CARREGAMENTO( I_ID_ORDEM  = E_ID_ORDEM ).
    IF I_ID_AGENT_FRETE IS NOT INITIAL.
      ZDE_ZSDT0001OD_ALV-ID_AGENT_FRETE = I_ID_AGENT_FRETE.
    ENDIF.
  ENDIF.

  PERFORM LANCAMENTO USING I_TIPO_FRETE I_FUNDO CHANGING E_ID_ORDEM E_ORDEM_ALV E_ID_AGENT_FRETE.

ENDFUNCTION.
