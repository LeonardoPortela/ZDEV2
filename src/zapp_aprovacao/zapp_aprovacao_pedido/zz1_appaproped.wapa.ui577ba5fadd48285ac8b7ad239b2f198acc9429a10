sap.ui.define([                                                                                                                                                                                                                                                
    "sap/m/MessageToast"                                                                                                                                                                                                                                       
], function(MessageToast) {                                                                                                                                                                                                                                    
    'use strict';                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
    return {                                                                                                                                                                                                                                                   
        Aprovar: function (oEvent) {                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
            var that = this                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
            let oCtx = this.templateBaseExtension.getExtensionAPI().getSelectedContexts()[0];                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            /* ===================================================================&nbsp;                                                                                                                                                                       
                        Chama Action no Behavior da CDS&nbsp;                                                                                                                                                                                                  
            =================================================================== */                                                                                                                                                                             
            var fnFunction = function () {                                                                                                                                                                                                                     
                return new Promise(function (fnResolve, fnReject) {                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
                    that.extensionAPI.invokeActions(                                                                                                                                                                                                           
                        "/aprovar",                                                                                                                                                                                                                            
                        [],                                                                                                                                                                                                                                    
                        {                                                                                                                                                                                                                                      
                            "ebeln": oCtx.getObject().ebeln,                                                                                                                                                                                                   
                            "sww_wiid": oCtx.getObject().sww_wiid                                                                                                                                                                                              
                        },                                                                                                                                                                                                                                     
                    ).then(function (data) {                                                                                                                                                                                                                   
                        fnResolve();                                                                                                                                                                                                                           
                        that.templateBaseExtension.getExtensionAPI().refreshTable();                                                                                                                                                                           
                        that.getView().getModel().refresh(true);                                                                                                                                                                                               
                    }).catch(                                                                                                                                                                                                                                  
                        function (oError) {                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
                            fnReject();                                                                                                                                                                                                                        
                            that.templateBaseExtension.getExtensionAPI().refreshTable();                                                                                                                                                                       
                            that.getView().getModel().refresh(true);                                                                                                                                                                                           
                        }                                                                                                                                                                                                                                      
                    );                                                                                                                                                                                                                                         
                });                                                                                                                                                                                                                                            
            }                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            var mParameters = {                                                                                                                                                                                                                                
                busy: {                                                                                                                                                                                                                                        
                    set: true,                                                                                                                                                                                                                                 
                    check: false                                                                                                                                                                                                                               
                },                                                                                                                                                                                                                                             
                dataloss: {                                                                                                                                                                                                                                    
                    popup: false,                                                                                                                                                                                                                              
                    navigation: false                                                                                                                                                                                                                          
                }                                                                                                                                                                                                                                              
            };                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            that.extensionAPI.securedExecution(fnFunction, mParameters);                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
        },                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
        Rejeitar: function (oEvent) {                                                                                                                                                                                                                          
            var that = this                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
            let oCtx = this.templateBaseExtension.getExtensionAPI().getSelectedContexts()[0];                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            /* ===================================================================&nbsp;                                                                                                                                                                       
                        Chama Action no Behavior da CDS&nbsp;                                                                                                                                                                                                  
            =================================================================== */                                                                                                                                                                             
            var fnFunction = function () {                                                                                                                                                                                                                     
                return new Promise(function (fnResolve, fnReject) {                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
                    that.extensionAPI.invokeActions(                                                                                                                                                                                                           
                        "/rejeitar",                                                                                                                                                                                                                           
                        [],                                                                                                                                                                                                                                    
                        {                                                                                                                                                                                                                                      
                            "ebeln": oCtx.getObject().ebeln,                                                                                                                                                                                                   
                            "sww_wiid": oCtx.getObject().sww_wiid                                                                                                                                                                                              
                        },                                                                                                                                                                                                                                     
                    ).then(function (data) {                                                                                                                                                                                                                   
                        fnResolve();                                                                                                                                                                                                                           
                        that.templateBaseExtension.getExtensionAPI().refreshTable();                                                                                                                                                                           
                        that.getView().getModel().refresh(true);                                                                                                                                                                                               
                    }).catch(                                                                                                                                                                                                                                  
                        function (oError) {                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
                            fnReject();                                                                                                                                                                                                                        
                            that.templateBaseExtension.getExtensionAPI().refreshTable();                                                                                                                                                                       
                            that.getView().getModel().refresh(true);                                                                                                                                                                                           
                        }                                                                                                                                                                                                                                      
                    );                                                                                                                                                                                                                                         
                });                                                                                                                                                                                                                                            
            }                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
            var mParameters = {                                                                                                                                                                                                                                
                busy: {                                                                                                                                                                                                                                        
                    set: true,                                                                                                                                                                                                                                 
                    check: false                                                                                                                                                                                                                               
                },                                                                                                                                                                                                                                             
                dataloss: {                                                                                                                                                                                                                                    
                    popup: false,                                                                                                                                                                                                                              
                    navigation: false                                                                                                                                                                                                                          
                }                                                                                                                                                                                                                                              
            };                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
            that.extensionAPI.securedExecution(fnFunction, mParameters);                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
        }                                                                                                                                                                                                                                                      
    };                                                                                                                                                                                                                                                         
});                                                                                                                                                                                                                                                            