*&---------------------------------------------------------------------*
*&  Include           ZXV56U18
*&---------------------------------------------------------------------*

DATA: LC_ID_PROC_CLIENTE TYPE ZDE_ID_PROC_CLIENTE,
      E_TC_CADASTRO      TYPE ZDE_TC_CADASTRO.

IF SY-TCODE NE 'VT03N' AND SY-TCODE NE 'VT03'.

  CALL METHOD ZCL_REPOM_VIAGEM_VPR=>GET_ID_PROC_CLIENTE_VT
    EXPORTING
      I_TKNUM           = I_XVTTK_WA-TKNUM
    IMPORTING
      E_TC_CADASTRO     = E_TC_CADASTRO
    RECEIVING
      E_ID_PROC_CLIENTE = LC_ID_PROC_CLIENTE
    EXCEPTIONS
      NAO_ENCONTRADO    = 1
      OTHERS            = 2.

  IF ( SY-SUBRC IS INITIAL ) AND ( E_TC_CADASTRO NE SY-TCODE OR ( SY-UCOMM EQ 'MM_TRLP' AND E_TC_CADASTRO EQ SY-TCODE ) ).
    MESSAGE E064(ZREPOM) RAISING FCODE_NOT_PERMITTED.
  ENDIF.

ENDIF.
