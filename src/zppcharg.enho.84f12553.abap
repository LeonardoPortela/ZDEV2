"Name: \PR:SAPLCHRG\FO:READ_BATCH\SE:END\EI
ENHANCEMENT 0 ZPPCHARG.
DATA: lv_matnr TYPE mara-matnr.

CALL FUNCTION 'CONVERSION_EXIT_MATN1_INPUT'
  EXPORTING
    input              = DFBATCH-MATNR
 IMPORTING
   OUTPUT             = lv_matnr
 EXCEPTIONS
   LENGTH_ERROR       = 1
   OTHERS             = 2
          .

IF  lv_matnr IS NOT INITIAL
AND DFBATCH-CHARG IS NOT INITIAL.

  IF DFBATCH-WERKS IS INITIAL.

    SELECT COUNT(*)
      FROM ZPPT0011
        WHERE MATNR EQ lv_matnr
          AND CHARG EQ DFBATCH-CHARG.

    IF SY-SUBRC IS INITIAL.
*      MESSAGE E878(12) WITH DFBATCH-MATNR DFBATCH-CHARG.
    ENDIF.

  ELSE.

    SELECT COUNT(*)
      FROM ZPPT0011
        WHERE MATNR EQ lv_matnr
          AND WERKS EQ DFBATCH-WERKS
          AND CHARG EQ DFBATCH-CHARG.

    IF SY-SUBRC IS INITIAL.
*      MESSAGE E877(12) WITH DFBATCH-MATNR DFBATCH-CHARG DFBATCH-WERKS.
    ENDIF.

  ENDIF.
ENDIF.
ENDENHANCEMENT.
