FUNCTION Z_REPOM_CADASTRO_PEDAGIO.
*"----------------------------------------------------------------------
*"*"Interface local:
*"  IMPORTING
*"     REFERENCE(I_CONSULTA) TYPE  CHAR01
*"     REFERENCE(I_ID_PROC_CLIENTE) TYPE  ZDE_ID_PROC_CLIENTE
*"  EXPORTING
*"     REFERENCE(I_GRAVOU) TYPE  CHAR01
*"  CHANGING
*"     VALUE(I_OB_PEDAGIO) TYPE REF TO  ZCL_REPOM_VIAGEM_VPR OPTIONAL
*"----------------------------------------------------------------------

  IF I_OB_PEDAGIO IS NOT INITIAL.
    OBJ_PEDAGIO = I_OB_PEDAGIO.
  ELSE.
    CREATE OBJECT OBJ_PEDAGIO
      EXPORTING
        I_ID_PROC_CLIENTE = I_ID_PROC_CLIENTE.
  ENDIF.

  CK_CONSULTA         = I_CONSULTA.
  CK_GRAVADO          = ABAP_FALSE.
  CK_ALTEROU_0300     = ABAP_TRUE.
  CK_ALTEROU_0300_PER = ABAP_TRUE.

  PERFORM CADASTRO_PEDAGIO.

  IF CK_GRAVADO EQ ABAP_TRUE OR I_CONSULTA IS NOT INITIAL.
    I_OB_PEDAGIO = OBJ_PEDAGIO.
  ENDIF.

  CLEAR: OBJ_PEDAGIO.

  I_GRAVOU = CK_GRAVADO.

ENDFUNCTION.
