FUNCTION Z_FI_DOCUMENT_REFRESH.
*"----------------------------------------------------------------------
*"*"Interface local:
*"  IMPORTING
*"     REFERENCE(I_OBJ_KEY) TYPE  AWKEY
*"----------------------------------------------------------------------
  "Tabelas
  DATA: IT_ZIB_CONTABIL_ERR TYPE TABLE OF ZIB_CONTABIL_ERR,
        IT_ZIB_CONTABIL      TYPE TABLE OF ZIB_CONTABIL.
  "WORK AREA
  DATA: WA_ZIB_CONTABIL_ERR TYPE ZIB_CONTABIL_ERR,
        WA_ZIB_CONTABIL     TYPE ZIB_CONTABIL.
  "Variaveis
  DATA: VAR_OBJ_KEY TYPE ZIB_CONTABIL_ERR-OBJ_KEY.


*  SELECT *
*    FROM ZIB_CONTABIL_ERR
*    INTO TABLE IT_ZIB_CONTABIL_ERR
*     WHERE OBJ_KEY = I_OBJ_KEY.

  SELECT *
     FROM ZIB_CONTABIL
     INTO TABLE IT_ZIB_CONTABIL
     WHERE OBJ_KEY EQ I_OBJ_KEY.

  READ TABLE IT_ZIB_CONTABIL INTO WA_ZIB_CONTABIL WITH KEY OBJ_KEY = I_OBJ_KEY .
  IF I_OBJ_KEY IS NOT INITIAL.
    IF I_OBJ_KEY EQ WA_ZIB_CONTABIL-OBJ_KEY.
      UPDATE ZIB_CONTABIL  SET RG_ATUALIZADO = 'N' WHERE OBJ_KEY = I_OBJ_KEY.
    ENDIF.
  ENDIF.
ENDFUNCTION.
