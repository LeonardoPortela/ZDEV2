*&---------------------------------------------------------------------*
*&  Include           ZGL016_O01
*&---------------------------------------------------------------------*

*&---------------------------------------------------------------------*
*&      Module  STATUS_0100  OUTPUT
*&---------------------------------------------------------------------*
*
*----------------------------------------------------------------------*
MODULE STATUS_0100 OUTPUT.
  IF SY-CALLD = 'X' AND  WG_CABECALHO-LOTE IS INITIAL.
    GET PARAMETER ID 'LOT' FIELD  WG_CABECALHO-LOTE.
  ENDIF.

  SET PF-STATUS 'Z001'.
*  CALL METHOD cl_gui_cfw=>dispatch.
  SET TITLEBAR 'Z001'.

ENDMODULE.                 " STATUS_0100  OUTPUT

*&---------------------------------------------------------------------*
*&      Module  CRIA_OBJETOS  OUTPUT
*&---------------------------------------------------------------------*
*
*----------------------------------------------------------------------*
MODULE CRIA_OBJETOS OUTPUT.
  DATA: EVENT         TYPE CNTL_SIMPLE_EVENT,
        EVENTS        TYPE CNTL_SIMPLE_EVENTS,
        TL_FILTER     TYPE LVC_T_FILT,
        WL_FILTER     TYPE LVC_S_FILT,
        TL_FUNCTION   TYPE UI_FUNCTIONS,
        WL_FUNCTION   LIKE TL_FUNCTION  WITH HEADER LINE.

  IF G_CUSTOM_CONTAINER IS INITIAL.
    WGZGLT035-LOTE = TEXT-L01.
    WGZGLT036-BUKRS = TEXT-L02.
    WGZGLT031-_DPTO_RESP = TEXT-L03.

    WA_LAYOUT-CWIDTH_OPT  = ''.
    WA_LAYOUT-ZEBRA       = C_X.
    WA_LAYOUT-NO_TOOLBAR  = C_X.
*    wa_layout-sgl_clk_hd  = C_X.
    WA_LAYOUT-NO_ROWMARK  = C_X.
*    wa_layout-col_opt     = C_X.
    WA_LAYOUT-SEL_MODE    = 'A'.
    WA_LAYOUT-BOX_FNAME   = 'MARK'.

    WA_STABLE-ROW         = C_X.

    CREATE OBJECT G_CUSTOM_CONTAINER
      EXPORTING
        CONTAINER_NAME = G_CONTAINER.

    CREATE OBJECT SPLITTER
      EXPORTING
        PARENT  = G_CUSTOM_CONTAINER
        ROWS    = 2
        COLUMNS = 1.

    CALL METHOD SPLITTER->GET_CONTAINER
      EXPORTING
        ROW       = 1
        COLUMN    = 1
      RECEIVING
        CONTAINER = CONTAINER_1.

    CREATE OBJECT GRID1
      EXPORTING
        I_PARENT = CONTAINER_1.

    CREATE OBJECT OBG_TOOLBAR
      EXPORTING
        IO_ALV_GRID = GRID1.

** Register event handler
    SET HANDLER OBG_TOOLBAR->ON_TOOLBAR FOR GRID1.
    SET HANDLER OBG_TOOLBAR->HANDLE_USER_COMMAND FOR GRID1.

    WL_FUNCTION = CL_GUI_ALV_GRID=>MC_FC_LOC_DELETE_ROW.
    APPEND WL_FUNCTION TO TL_FUNCTION.
    WL_FUNCTION = CL_GUI_ALV_GRID=>MC_FC_LOC_INSERT_ROW.
    APPEND WL_FUNCTION TO TL_FUNCTION.
    WL_FUNCTION = CL_GUI_ALV_GRID=>MC_FC_LOC_MOVE_ROW.
    APPEND WL_FUNCTION TO TL_FUNCTION.
    WL_FUNCTION = CL_GUI_ALV_GRID=>MC_FC_LOC_PASTE.
    APPEND WL_FUNCTION TO TL_FUNCTION.
    WL_FUNCTION = CL_GUI_ALV_GRID=>MC_FC_LOC_PASTE_NEW_ROW.
    APPEND WL_FUNCTION TO TL_FUNCTION.
    WL_FUNCTION = CL_GUI_ALV_GRID=>MC_FC_LOC_UNDO.
    APPEND WL_FUNCTION TO TL_FUNCTION.
    WL_FUNCTION = CL_GUI_ALV_GRID=>MC_FC_LOC_APPEND_ROW.
    APPEND WL_FUNCTION TO TL_FUNCTION.
    WL_FUNCTION = CL_GUI_ALV_GRID=>MC_FC_LOC_COPY.
    APPEND WL_FUNCTION TO TL_FUNCTION.
    WL_FUNCTION = CL_GUI_ALV_GRID=>MC_FC_LOC_COPY_ROW.
    APPEND WL_FUNCTION TO TL_FUNCTION.
    WL_FUNCTION = CL_GUI_ALV_GRID=>MC_FC_LOC_CUT.
    APPEND WL_FUNCTION TO TL_FUNCTION.
    WL_FUNCTION = CL_GUI_ALV_GRID=>MC_FC_LOC_CUT.
    APPEND WL_FUNCTION TO TL_FUNCTION.
    WL_FUNCTION = CL_GUI_ALV_GRID=>MC_FC_CHECK.
    APPEND WL_FUNCTION TO TL_FUNCTION.
    WL_FUNCTION = CL_GUI_ALV_GRID=>MC_FC_REFRESH.
    APPEND WL_FUNCTION TO TL_FUNCTION.

    PERFORM F_MONTAR_LAYOUT USING SPACE.
    PERFORM F_MONTAR_SORT.

    CLEAR WA_LAYOUT-CWIDTH_OPT.
    CALL METHOD GRID1->SET_TABLE_FOR_FIRST_DISPLAY
      EXPORTING
        IT_TOOLBAR_EXCLUDING = TL_FUNCTION
        IS_LAYOUT            = WA_LAYOUT
      CHANGING
        IT_FIELDCATALOG      = TG_FIELDCATALOG[]
        IT_SORT              = TG_SORT[]
        IT_OUTTAB            = TG_ITEM[].

    CALL METHOD GRID1->REGISTER_EDIT_EVENT
      EXPORTING
        I_EVENT_ID = CL_GUI_ALV_GRID=>MC_EVT_MODIFIED.

    CALL METHOD GRID1->REGISTER_EDIT_EVENT
      EXPORTING
        I_EVENT_ID = CL_GUI_ALV_GRID=>MC_EVT_ENTER.

    SET HANDLER:
      LCL_EVENT_HANDLER=>ON_DOUBLE_CLICK          FOR GRID1,
      LCL_EVENT_HANDLER=>ON_DATA_CHANGED_FINISHED FOR GRID1,
      LCL_EVENT_HANDLER=>ON_DATA_CHANGED          FOR GRID1.

*    posiciona spliter na altura x
    CALL METHOD SPLITTER->SET_ROW_HEIGHT
      EXPORTING
        ID     = 1
        HEIGHT = 100.
  ENDIF.

  CALL METHOD GRID1->REFRESH_TABLE_DISPLAY
    EXPORTING
      IS_STABLE = WA_STABLE.
ENDMODULE.                 " CRIA_OBJETOS  OUTPUT
