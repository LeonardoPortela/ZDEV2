"Name: \PR:SAPLIMR0\FO:READG_PAI\SE:BEGIN\EI
ENHANCEMENT 0 Z_PM_IK11_CHECK.
DATA: VLCOD(4) TYPE C,
      RDCNT(4) TYPE C,
      QMNUM    TYPE VIQMEL-QMNUM.

WRITE IMRG-VLCOD  TO VLCOD DECIMALS 4.
WRITE RIMR0-RDCNT TO RDCNT DECIMALS 4.

CALL FUNCTION 'CONVERSION_EXIT_ALPHA_INPUT'
  EXPORTING
    INPUT  = RDCNT
  IMPORTING
    OUTPUT = RDCNT.

IF VLCOD NE RDCNT.

  IF NOT ( DYFLD IS INITIAL ).
    SET CURSOR FIELD DYFLD LINE SY-STEPL.
  ENDIF.

  MESSAGE ID 'IR' TYPE T370P-MRMES NUMBER '053' WITH IMPT-POINT.
  LEAVE TO SCREEN 0.

ELSE.

  DATA: PM_CAT TYPE REF TO ZCL_PM_CAT.
  CREATE OBJECT PM_CAT.

  QMNUM = RIMR0-WOOBK.

  PM_CAT->SET_NOTA( QMNUM ).
  PM_CAT->SET_MEDIDOR( i_medidor1 =  imrg-readg
                       i_medidor2 =  impt-mrmax ).
  PM_CAT->CONTADOR( 1 ).
ENDIF.
ENDENHANCEMENT.
