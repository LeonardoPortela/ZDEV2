FUNCTION Z_FI_INBOUND_INVOICE.
*"----------------------------------------------------------------------
*"*"Interface local:
*"  TABLES
*"      T_INVOICE STRUCTURE  ZFI_INVOICE
*"----------------------------------------------------------------------
  DATA: T_ZFIT0036 TYPE TABLE OF ZFIT0036.

  DATA : WA_INVOICE   TYPE ZFI_INVOICE,
         WA_ZFIT0036  TYPE ZFIT0036.

*  "// Armazenamento de LOG de Entrada
  INCLUDE ZAFL_MACROS.
  /AFL/LOG_INIT.
  /AFL/SAVE.

  LOOP AT T_INVOICE INTO WA_INVOICE.

    CLEAR WA_ZFIT0036.

    SELECT SINGLE *
      INTO WA_ZFIT0036
      FROM ZFIT0036
     WHERE OBJ_KEY = WA_INVOICE-OBJ_KEY.

    IF ( WA_ZFIT0036-STATUS IS INITIAL ) OR ( SY-SUBRC IS NOT INITIAL ).

      MOVE-CORRESPONDING WA_INVOICE TO WA_ZFIT0036 .

      MODIFY ZFIT0036 FROM  WA_ZFIT0036 .

    ENDIF.

  ENDLOOP.

ENDFUNCTION.
