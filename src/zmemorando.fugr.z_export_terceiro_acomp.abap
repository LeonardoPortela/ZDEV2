FUNCTION Z_EXPORT_TERCEIRO_ACOMP.
*"----------------------------------------------------------------------
*"*"Interface local:
*"  IMPORTING
*"     REFERENCE(P_BUKRS) TYPE  BUKRS OPTIONAL
*"     REFERENCE(P_WERKS) TYPE  WERKS_D OPTIONAL
*"     REFERENCE(P_MATNR) TYPE  MATNR OPTIONAL
*"     REFERENCE(P_REMETENTE) TYPE  KUNNR OPTIONAL
*"     REFERENCE(T_EXPORT) TYPE  LXHME_RANGE_C10_T OPTIONAL
*"     REFERENCE(T_PERIOD) TYPE  LXHME_RANGE_DATE_T OPTIONAL
*"     REFERENCE(EXPORTADORES) TYPE  CHAR1 DEFAULT 'X'
*"     REFERENCE(NOTAS_EXPORTACAO) TYPE  CHAR1 DEFAULT 'X'
*"     REFERENCE(P_DIRECAO) TYPE  Z_MEMO_DIRECAO DEFAULT '2'
*"     REFERENCE(T_NF) TYPE  ZMEMO_NF_T OPTIONAL
*"  TABLES
*"      IT_EXPORTACOES STRUCTURE  ZEXPORT_ACOMP OPTIONAL
*"      IT_NOTAS STRUCTURE  ZEXPORT_NOTAS OPTIONAL
*"  EXCEPTIONS
*"      CFOPS_SAIDA
*"----------------------------------------------------------------------

  CLEAR: IT_EXPORTACOES[], IT_NOTAS[].

  IT_NF[] = T_NF[].

  PERFORM PREENCHE_FILTROS USING P_BUKRS P_WERKS P_MATNR P_DIRECAO P_REMETENTE.

  IF T_CFOP IS INITIAL.
    MESSAGE S041 RAISING CFOPS_SAIDA.
  ENDIF.

  PERFORM BUSCA_NOTAS_SAIDA TABLES T_EXPORT T_PERIOD IT_NOTAS USING NOTAS_EXPORTACAO P_DIRECAO NOTAS_EXPORTACAO.

  SORT IT_NOTAS BY EXPORTADOR.

  IF NOT EXPORTADORES IS INITIAL.
    PERFORM AGRUPA_ACOMPANHAMENTO TABLES IT_NOTAS IT_EXPORTACOES USING P_DIRECAO.
  ENDIF.

ENDFUNCTION.
